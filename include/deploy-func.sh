#!/bin/bash

###################################################################################
# get_usb_device
###################################################################################
get_usb_device()
{
	sudo lshw | grep "bus info: usb" -A 12 | grep "logical name: /dev/sd" | grep -Po "(/dev/sd.*)" | sort
}

###################################################################################
# get_1st_usb_storage
###################################################################################
get_1st_usb_storage()
{
	(
	root_dev=$(mount | grep " / " | grep  -Po "(/dev/sd[^ ]*)")
	if [ x"" = x"$root_dev" ]; then
		root_dev="/dev/sdx"
	fi
	
	usb_devs=($(get_usb_device | grep -v $root_dev))
	echo ${usb_devs[0]}
	)
}

###################################################################################
# get_deploy_type <deploy>
###################################################################################
get_deploy_type()
{
	expr "X$1" : 'X\([^:]*\):*.*'
}

###################################################################################
# get_deploy_device <deploy>
###################################################################################
get_deploy_device()
{
	expr "X$1" : 'X[^:]*:\(.*\)'
}

